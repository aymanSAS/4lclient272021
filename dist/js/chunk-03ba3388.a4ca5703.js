(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03ba3388"],{"0175":function(t,e,s){},"06be":function(t,e,s){"use strict";s("0175")},"102c":function(t,e,s){"use strict";s("275e")},2461:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown"},[s("select",{staticClass:"browser-default custom-select",staticStyle:{"margin-bottom":"1em"}},[s("option",{attrs:{selected:""}},[t._v("Open this select menu")]),t._l(t.mydata,(function(e){return s("option",{key:e.id},[t._v(t._s(e.payload))])}))],2)])},n=[],i={name:"MessagesDrop",props:["mydata"]},r=i,o=s("2877"),c=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=c.exports},"275e":function(t,e,s){},2899:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{clas:"messagetable"}},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"id"}},[t._v("ID :")]),s("div",{staticClass:"col-sm-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentmessage.id,expression:"currentmessage.id"}],staticClass:"form-control",attrs:{type:"text",name:"id",readonly:""},domProps:{value:t.currentmessage.id},on:{input:function(e){e.target.composing||t.$set(t.currentmessage,"id",e.target.value)}}})]),s("br"),s("div",[s("table",{staticClass:"table"},[t._m(0),t._l(t.ays,(function(e){return s("tr",{key:e.id,class:{highlight:e.id==t.currentmessage.id},on:{click:function(s){return t.selectRow(e.id,e.fcode,e.comment)}}},[s("td",[t._v(" "+t._s(e.id)+" ")]),s("td",[t._v(" Machine Stop ")]),s("td",[t._v(" "+t._s(t._f("formatDate")(e.date))+" ")]),s("td",[t._v(" "+t._s(e.fcode)+" .. "+t._s(e.fdesc)+" ")]),s("td",[t._v(" "+t._s(e.Comment)+" ")]),s("td",[t._v(" "+t._s(e.mcomment)+" ")]),s("td",[t._v(" "+t._s(e.tp2||0)+" ")]),s("td",[t._v(" "+t._s(e.fperiod||0)+" ")])])}))],2)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("th",{attrs:{scope:"col"}},[t._v("id")]),s("th",{attrs:{scope:"col"}},[t._v("Message")]),s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{attrs:{scope:"col"}},[t._v("Fcode")]),s("th",{attrs:{scope:"col"}},[t._v("Op Comment")]),s("th",{attrs:{scope:"col"}},[t._v("Maint Comment")]),s("th",{attrs:{scope:"col"}},[t._v("Maint Time")]),s("th",{attrs:{scope:"col"}},[t._v("Stop Period")])])}],i=(s("db04"),{name:"MessagesTable",props:["ays","user","cats","subcats","failures","tp1","tp2","tp3"],data:function(){return{messages:[],currentmessage:{id:"",fcode:"",comment:""},mycat:"",currentIndex:-1,cat:"",mycats:""}},methods:{selectRow:function(t,e,s){this.currentmessage.id=t,this.currentmessage.fcode=e,this.currentmessage.comment=s}}}),r=i,o=(s("5edc"),s("2877")),c=Object(o["a"])(r,a,n,!1,null,"1417c334",null);e["a"]=c.exports},"30e7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),s("div",{staticClass:"tab-content"},[s("div",{staticClass:"tab-pane container active",attrs:{id:"home"}},[s("button",{staticClass:"btn btn-primary btn-sm col-xs-2",staticStyle:{"margin-bottom":"1em"},on:{click:function(e){return e.preventDefault(),t.Getit.apply(null,arguments)}}},[t._v(" Get Messages")]),s("MessagesTable",{attrs:{ays:t.content}})],1),s("div",{staticClass:"tab-pane container fade",attrs:{id:"menu1"}}),s("div",{staticClass:"tab-pane container fade",attrs:{id:"menu2"}},[s("Visa")],1),s("div",{staticClass:"tab-pane container fade",attrs:{id:"ayman"}})]),t._m(1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"nav nav-tabs"},[s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"#home"}},[t._v("Messgaes")])]),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#menu1"}},[t._v("New ")])]),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#menu2"}},[t._v("Menu 2")])]),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{"data-toggle":"tab",href:"#ayman"}},[t._v("Ayman")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{attrs:{align:"right"}},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v("Save")])])}],i=s("311e"),r=s("1f57"),o=s("2899"),c={name:"TabMenue",data:function(){return{content:"",user:""}},components:{MessagesTable:o["a"],Visa:i["a"]},mounted:function(){var t=this;r["a"].getMessages().then((function(e){t.content=e.data})).catch((function(t){console.error(t)}))},methods:{Getit:function(){var t=this;r["a"].getMessages().then((function(e){t.content=e.data})).catch((function(t){console.error(t)}))}}},l=c,u=(s("fb9f"),s("2877")),m=Object(u["a"])(l,a,n,!1,null,"e432eaec",null);e["a"]=m.exports},"311e":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"visa"}},[s("h1",[t._v("Vue Visa Application")]),s("form",[t._m(0),s("br"),t._m(1),s("br"),t._m(2),s("br"),s("label",{attrs:{for:"passport number"}},[t._v("Passport Number:")]),s("input",{attrs:{type:"text",required:""}}),s("label",{attrs:{for:"duration"}},[t._v("Duration of stay:")]),s("input",{attrs:{type:"text",required:""}}),s("br"),s("br"),s("button",{on:{click:t.addVisa}},[t._v("Add another previous visa")]),s("br"),t._l(t.applicants,(function(e,a){return s("div",{key:a,staticClass:"previous"},[s("span",{on:{click:function(e){return t.deleteVisa(a)}}},[t._v("x")]),s("label",{attrs:{for:"duration"}},[t._v(t._s(a+1)+". Previous Visa:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.previous,expression:"applicant.previous"}],attrs:{type:"text",required:""},domProps:{value:e.previous},on:{input:function(s){s.target.composing||t.$set(e,"previous",s.target.value)}}}),s("label",{attrs:{for:"duration"}},[t._v("Year of expiration:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.expiration,expression:"applicant.expiration"}],attrs:{type:"text",required:""},domProps:{value:e.expiration},on:{input:function(s){s.target.composing||t.$set(e,"expiration",s.target.value)}}})])}))],2)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"first name"}},[t._v("First Name : "),s("input",{attrs:{type:"text",required:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"last name"}},[t._v("Last Name : "),s("input",{attrs:{type:"text",required:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"country"}},[t._v("Nationality : "),s("input",{attrs:{type:"text",required:""}})])}],i=(s("a434"),{name:"Visa",props:{msg:String},data:function(){return{applicants:[{previous:"",expiration:""}]}},methods:{addVisa:function(){this.applicants.push({previous:"",expiration:""})},deleteVisa:function(t){this.applicants.splice(t,1)}}}),r=i,o=(s("102c"),s("2877")),c=Object(o["a"])(r,a,n,!1,null,"e4aeddda",null);e["a"]=c.exports},"5c12":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{clas:"opmessageform"}},[s("div",{staticClass:"col-sm-10"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"select1"}},[t._v("Failure Category :")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.content.fcode,expression:"content.fcode"}],staticStyle:{width:"400px"},attrs:{name:"select1"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.content,"fcode",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",selected:"",disabled:"",hidden:""}},[t._v("Choose here")]),t._l(t.cats,(function(e){return s("option",{key:e.catcode,on:{click:function(s){return t.loadsubcat(e.catcode)}}},[t._v(" "+t._s(e.catname))])}))],2)]),s("div",{staticClass:"col-sm-10"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"select2"}},[t._v(" Failure Sub Category:")]),s("select",{staticStyle:{width:"400px"},attrs:{name:"select2"}},t._l(t.myfailures,(function(e){return s("option",{key:e.id,on:{click:function(s){return t.loadfailure(e.fcode)}}},[t._v(" "+t._s(e.fname))])})),0)]),s("div",{staticClass:"col-sm-10"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"select3"}},[t._v(" Failure Cause:")]),s("select",{staticStyle:{width:"400px"},attrs:{name:"select3"}},t._l(t.cats,(function(e){return s("option",{key:e.id},[t._v(" "+t._s(e.catcode))])})),0)]),s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"text"}},[t._v("Comment :")]),t._m(0),s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.Setit.apply(null,arguments)}}},[t._v("Save")]),s("MessagesTable",{attrs:{ays:t.content,cats:t.cats,subcats:t.subcats,failures:t.failures}})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-10"},[s("input",{staticClass:"form-control",attrs:{type:"text"}})])}],i=s("1f57"),r=s("2899"),o={name:"Opmessageform",components:{MessagesTable:r["a"]},data:function(){return{mysubcats:"",content:"",myfailure:""}},props:["cats","subcats","failures"],mounted:function(){this.Getit()},methods:{Getit:function(){var t=this;i["a"].getMessages().then((function(e){t.content=e.data})).catch((function(t){console.error(t)}))},loadsubcat:function(t){var e=this;i["a"].getmysubcat(t).then((function(t){e.mysubcats=t.data})).catch((function(t){console.error(t)}))},loadfailure:function(t){var e=this;i["a"].getmyfailure(t).then((function(t){e.myfailure=t.data})).catch((function(t){console.error(t)}))}}},c=o,l=s("2877"),u=Object(l["a"])(c,a,n,!1,null,null,null);e["a"]=u.exports},"5edc":function(t,e,s){"use strict";s("7894")},7894:function(t,e,s){},"8c5b":function(t,e,s){},"997c":function(t,e,s){"use strict";s.r(e);var a,n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._m(0),s("div",{staticClass:"jumbotron",staticStyle:{width:"100%"}},[s("OpmessageTable",{attrs:{ays:t.content,cats:t.cats,subcats:t.subcats,failures:t.failures}})],1)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[s("br")])}],r=(s("5c12"),s("30e7")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{clas:"messagetable"}},[s("div",[1==t.lockmode?s("img",{staticStyle:{"margin-top":"-60px","margin-left":"0px"},attrs:{src:"images/unlock-icon-s8.png",alt:"Lock",width:"50",height:"60"}}):0==t.lockmode?s("img",{staticStyle:{"margin-top":"-60px","margin-left":"0px"},attrs:{src:"images/unlock-icon-8.png",alt:"UNLock",width:"50",height:"60"}}):t._e(),s("h1",[t._v(" "+t._s(t.countDown)+" ")])]),s("div",{staticClass:"col-sm-10"},[s("ul",{ref:"l1",attrs:{id:"l1"}},t._l(t.cats,(function(e){return s("li",{key:e.catcode,staticClass:"btn btn-success",staticStyle:{"margin-bottom":"20px","margin-right":"20px"},attrs:{type:"button",value:e.catcode},on:{click:function(s){return t.loadsubcat(e.catcode)}}},[t._v(" "+t._s(e.catname)+" ")])})),0)]),s("hr"),s("div",{staticClass:"col-sm-10"},[s("ul",{ref:"l2",attrs:{id:"l2"}},t._l(t.mysubcats,(function(e){return s("li",{key:e.subcatcode,staticClass:"btn btn-primary",staticStyle:{"margin-bottom":"20px","margin-right":"20px"},attrs:{type:"button"},on:{click:function(s){return t.loadfailure(e.subcatcode)}}},[t._v(" "+t._s(e.subcatname)+" ")])})),0)]),s("hr"),s("div",{staticClass:"col-sm-10"},[s("ul",{ref:"l3",attrs:{id:"l3"}},t._l(t.myfailures,(function(e){return s("li",{key:e.failurecode,staticClass:"btn btn-warning",staticStyle:{"margin-bottom":"20px","margin-right":"20px"},attrs:{type:"button"},on:{click:function(s){return t.changefcode(e.failurecode,e.failurename)}}},[t._v(" "+t._s(e.failurename)+" ")])})),0)]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"id"}},[t._v("ID :")]),s("div",{staticClass:"col-sm-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentmessage.id,expression:"currentmessage.id"}],ref:"id",staticClass:"form-control",staticStyle:{width:"400px"},attrs:{type:"text",name:"id",readonly:""},domProps:{value:t.currentmessage.id},on:{input:function(e){e.target.composing||t.$set(t.currentmessage,"id",e.target.value)}}})])]),s("div",{staticClass:"col-sm"},[s("label",{staticClass:"col-sm-5 col-form-label",attrs:{for:"text"}},[t._v("Failure Code :")]),s("div",{staticClass:"col-sm-1"},[t.currentmessage.fcode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentmessage.fcode,expression:"currentmessage.fcode"}],ref:"refid",staticClass:"form-control",staticStyle:{width:"400px",background:"red"},attrs:{name:"infcode",id:"infcode",type:"text",readonly:""},domProps:{value:t.currentmessage.fcode},on:{input:function(e){e.target.composing||t.$set(t.currentmessage,"fcode",e.target.value)}}}):t._e()])])]),s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"text"}},[t._v("Comment :")]),s("div",{staticClass:"col-sm-11"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentmessage.comment,expression:"currentmessage.comment"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.currentmessage.comment},on:{input:function(e){e.target.composing||t.$set(t.currentmessage,"comment",e.target.value)}}})]),s("br"),s("div",[t.maintmode>0?s("p",{staticClass:"blink-bg",staticStyle:{"margin-left":"420px","margin-bottom":"4px"}},[t._v(" * Maintenance Mode *")]):t._e()]),s("button",{staticClass:"btn btn-success",staticStyle:{float:"left","margin-bottom":"20px","margin-right":"20px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updateit.apply(null,arguments)}}},[t._v("Save")]),s("button",{staticClass:"btn btn-primary",staticStyle:{float:"left","mif argin-bottom":"20px","margin-right":"20px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.Getmessages.apply(null,arguments)}}},[t._v("Refresh")]),s("button",{staticClass:"btn btn-success",staticStyle:{float:"right","margin-bottom":"20px","margin-right":"20px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.Finishme.apply(null,arguments)}}},[t._v("Finish")]),s("div",[s("table",{ref:"table1",staticClass:"table"},[t._m(0),t._l(t.propmessages,(function(e){return s("tr",{key:e.id,class:{highlight:e.id==t.currentmessage.id}||{ay:!t.currentmessage.id},on:{click:function(s){return t.selectRow(e.id,e.fcode,e.Comment,e.mtime,e.fsubcat,e.fcatcode,e.mreject,e.insertdate)}}},[s("td",[t._v(" "+t._s(e.id)+" ")]),s("td",[t._v(" Machine Stop ")]),s("td",[t._v(" "+t._s(t._f("formatDate")(e.date))+" ")]),s("td",[t._v(" "+t._s(e.fcode)+" .. "+t._s(e.fdesc)+" ")]),s("td",[t._v(" "+t._s(e.Comment)+" ")]),2==e.mreject?s("td",{staticStyle:{color:"blue"}},[t._v(" Finished ")]):t._e(),1==e.mreject?s("td",{staticStyle:{color:"red"}},[t._v(" Rejected ")]):t._e()])}))],2)])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("th",{attrs:{scope:"col"}},[t._v("id")]),s("th",{attrs:{scope:"col"}},[t._v("Message")]),s("th",{attrs:{scope:"col"}},[t._v("Date")]),s("th",{attrs:{scope:"col"}},[t._v("Fcode")]),s("th",{attrs:{scope:"col"}},[t._v("OP Comment")]),s("th",{attrs:{scope:"col"}},[t._v("Maintenance ")])])}],l=s("ade3"),u=(s("d3b7"),s("c1df")),m=s.n(u),d=s("1f57"),f=s("db04"),h=s("8654"),g=(s("c4c6"),{name:"OpmessageTable",props:["ays","user1","cats","subcats","failures"],data:function(){return{mybatch:Object(l["a"])({id:"",runid:"",startdate:"",enddate:"",dayend:""},"runid",""),user:new h["a"]("",""),messages:[],countDown:"",bsubcat:"",maintmode:"",lockmode:0,currentmessage:{id:"",fcode:"",comment:"",fdesc:"",mtime:"",subcat:"",catcode:"",mreject:"",insertdate:""},mycat:"",fcode:"",mysubcats:"",content:"",myfailures:"",currentIndex:-1,cat:"",mycats:"",propmessages:[],timer:"",timer2:"",connection:null,interval:"",runmode:"",lastppd:"",ay1:"",ay2:"",ay3:"",onlinerate:0}},created:function(){},mounted:function(){var t=this;setTimeout(this.getlastppd(),500),setTimeout(this.checkbatch(),700),setTimeout(this.swmode(),200),setTimeout(this.Getmessages(),1e3),this.timer=setInterval((function(){return t.getinterval()}),1e4),this.timer2=setInterval((function(){return t.getrates()}),2e5)},beforDestroyed:function(){clearInterval(this.timer)},computed:{rotateprop:function(){return this.propmessages=this.ays,this.propmessages},currentUser:function(){return this.$store.state.auth.user}},methods:(a={sleep:function(t){return new Promise((function(e){setTimeout(e,t)}))},getrates:function(){var t=this;0==this.countDown&&f["a"].getrates().then((function(e){if(t.onlinerate=e.data[0].onlinerate,t.sleep(1e3),"rdown"==t.currentmessage.subcat&(t.onlinerate>2e3||0==t.onlinerate)&0==t.countDown||"CHO"==t.currentmessage.subcat&t.onlinerate>200){var s={mid:"",val:""};s.mid=t.$store.state.midDo0,s.val="true",f["a"].sendonoff(s).then((function(e){console.log("send off ok"),setTimeout(t.Getlockmode(t.$store.state.midLockMode),1e3)})).catch((function(t){console.log(t)})),setTimeout(t.Getmessages(),1e3)}}))},checkbatch:function(){var t=this;f["a"].getlastmode().then((function(e){t.mybatch=e.data})).catch((function(t){console.error(t)})).then((function(){}))},Getit:function(){var t=this;d["a"].getMessages().then((function(e){t.content=e.data})).catch((function(t){console.error(t)}))},changefcode:function(t,e){this.currentmessage.fcode=t,this.currentmessage.fdesc=e},countDownTimer:function(){var t=this;this.countDown>0&&setTimeout((function(){t.countDown-=1,t.countDownTimer()}),1e3)},startcountDown:function(t){this.countDown>0||(this.countDown=t,this.countDownTimer())},Resetme:function(){this.currentmessage=""},loadsubcat:function(t){var e=this;this.bsubcat="",this.propmessages.length&&(this.interval=1),"CLOSED"!=t?(this.$refs.l2.hidden=0,this.$refs.l3.hidden=1,d["a"].getmysubcat(t).then((function(t){e.mysubcats=t.data})).catch((function(t){console.error(t)}))):this.changefcode("CLOSED","Machine is closed")},loadfailure:function(t){var e=this;this.propmessages.length&&(this.interval=1),this.$refs.l3.hidden=0,this.bsubcat=t,d["a"].getmyfailure(t).then((function(t){e.myfailures=t.data})).catch((function(t){console.subcaterror(t)}))},Getmessages:function(){var t=this,e=this;d["a"].getMessages().then((function(s){t.rotateprop,t.propmessages=s.data,e.watchdata=t.propmessages,t.Getmaintmode(t.$store.state.midMaintMode),setTimeout((function(){t.Getlockmode(t.$store.state.midLockMode)}),100),t.propmessages.length&&setTimeout((function(){t.selectRow(t.propmessages[0].id,t.propmessages[0].fcode,t.propmessages[0].Comment,t.propmessages[0].mtime,t.propmessages[0].fsubcat,t.propmessages[0].fcatcode,t.propmessages[0].mreject,t.propmessages[0].insertdate)}),1e3)})).catch((function(e){t.$router.go(0),console.error(e)})),setTimeout((function(){t.Getlockmode(t.$store.state.midLockMode)}),4e3)},Getlockmode:function(t){var e=this;f["a"].getlockmode(t).then((function(t){e.lockmode=t.data[0].lockmode,console.log("ayLockmode : "+e.lockmode)})).catch((function(t){e.$router.go(0),console.error(t)}))},relock:function(){"CHO"==this.currentmessage.subcat&""!=this.currentmessage.insertdate||0==this.propmessages.length||this.countDown>0||100==this.maintmode||!this.currentmessage.ftime&1==this.lockmode||0!=this.propmessages.length&&this.offon("true",this.$store.state.midDo0)},Finishme:function(){var t=this;if(this.currentmessage.insertdate){if("CHO"!=this.currentmessage.subcat&null!=this.$store.state.sbatch[0].enddate&null!=this.$store.state.sbatch[0].startdate)return alert("لابد من إدخال تشغيله جديده "),void this.$router.push("/batch");if("CLOSED"==this.currentmessage.subcat&&null!=this.$store.state.sbatch[0].startdate&null!=this.$store.state.sbatch[0].enddate)return alert("أدخل تشغيله جديده لبدايه العمل"),this.getbatches(),void this.$router.push("/batch");if("CHO"==this.currentmessage.subcat){var e=this.$store.state.sbatch[0].dayend;if(1==e&null!=this.$store.state.sbatch[0].enddate)return alert("أدخل تشغيله جديده"),this.getbatches(),this.offon("true",this.$store.state.midDo0),this.Getmessages(),void this.$router.push("/batch")}if(0!=this.runmode){if(setTimeout((function(){t.Getmessages()}),1e3),this.propmessages.length&&!(this.countDown>0)){if("CLOSED"==this.currentmessage.fcode){this.getlastppd();var s=new Date,a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),n=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),i=a+" "+n;m()(String(this.lastppd)).format("YYYY-MM-DD"),m()(String(i)).format("YYYY-MM-DD")}s=new Date,a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),n=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),i=a+" "+n;var r={id:this.currentmessage.id,ftime:i,empno:this.currentUser.username};if(this.currentmessage.id)if(this.currentmessage.insertdate)if(this.currentmessage.mtime||"MR"!=this.currentmessage.subcat){if(confirm(" هل انت متاكد من انتهاء سبب التوقف "+r.id+"  واستمرار العمل؟")){this.offon("false",this.$store.state.midDo0);var o=this.$store.state.mtimer;this.startcountDown(o),setTimeout((function(){d["a"].updateMessagesftime(r).then((function(t){})).catch((function(t){console.log(t)}))}),900*o),setTimeout((function(){t.offon("true",t.$store.state.midDo4)}),1e3*o),"CHO"==this.bsubcat&&setTimeout((function(){t.offon("true",t.$store.state.midDo4)}),1e3*o),setTimeout((function(){t.$router.go(0)}),1050*o)}}else alert("يجب تأكيد اصلاح العطل من الصيانة ");else alert("  يجب اختيار نوع التوقف");else alert("يجب اختيار الرسالة من اسفل")}}else alert("Machine is OFF")}},sendMessage:function(t){console.log(this.connection),this.connection.send(t)},Getrunmode:function(t){var e=this;f["a"].getlockmode(t).then((function(t){e.runmode=t.data[0].lockmode})).catch((function(t){console.error(t)}))},swmode:function(){var t=this;f["a"].getlastmode().then((function(e){void 0!==e.data[0]&&(t.mybatch=e.data,t.$store.state.sbatch=t.mybatch)})).catch((function(t){console.error(t)})),f["a"].getlockmode(this.$store.state.midDo4).then((function(e){t.runmode=e.data[0].lockmode})).catch((function(t){console.error(t)})),f["a"].getlastmode().then((function(e){if(void 0!==e.data[0]){t.mode=e.data[0].mode;var s=new Date(e.data[0].startdate),a=new Date,n=Math.abs(a-s)/6e4/60;t.period=n}}))},offon:function(t,e){var s={mid:"",val:""};s.mid=e,s.val=t,f["a"].sendonoff(s).then((function(t){console.log("send off ok")})).catch((function(t){console.log(t)}))},getinterval:function(){this.Getrunmode(this.$store.state.midDo4);var t=this.interval;1!=t&&(!this.propmessages.length||this.maintmode>0||this.propmessages.length&!this.currentmessage.insertdate)&&this.Getmessages()},Getmaintmode:function(t){var e=this;f["a"].getmaintmode(t).then((function(t){e.maintmode=t.data[0].maintmode,console.log(e.maintmode)})).catch((function(t){console.error(t)}))}},Object(l["a"])(a,"Getrunmode",(function(t){var e=this;f["a"].getlockmode(t).then((function(t){e.runmode=t.data[0].lockmode})).catch((function(t){console.error(t)}))})),Object(l["a"])(a,"getbatches",(function(){var t=this;f["a"].getlastmode().then((function(e){t.mybatch=e.data})).catch((function(t){console.error(t)}))})),Object(l["a"])(a,"getlastppd",(function(){var t=this;d["a"].getlastppd().then((function(e){t.lastppd=e.data[0].insertdate,console.log(t.lastppd)})).catch((function(t){console.error(t)}))})),Object(l["a"])(a,"createmessageRUN",(function(){var t={},e=new Date,s=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),a=e.getUTCHours()+2+":"+e.getMinutes()+":"+e.getSeconds(),n=s+" "+a;t.date=n,t.mid=this.$store.state.midDi0,t.vid=1,t.payload="Machine 1000  Run ",d["a"].createmessage(t)})),Object(l["a"])(a,"update",(function(t){var e=this;d["a"].updateMessages(t).then((function(t){console.log(t),e.Getmessages()})).catch((function(t){console.log(t)})),this.$refs.l3.hidden=1,this.$refs.l2.hidden=1,this.$refs.refid.hidden=1})),Object(l["a"])(a,"updateit",(function(){var t=this;if(this.propmessages.length)if("CHO"!=this.currentmessage.subcat&&"CLOSED"!=this.currentmessage.subcat||!this.currentmessage.insertdate)if("OPL"!=this.bsubcat||null!=this.currentmessage.comment){var e=new Date,s=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),a=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),n=s+" "+a;this.$refs.l3.hidden;if(this.currentmessage.fcode)if(2!=this.currentmessage.mreject)if(1!=this.currentmessage.mreject||null!=this.currentmessage.comment){if(this.currentmessage.insertdate)i={id:this.currentmessage.id,fcode:this.currentmessage.fcode,comment:this.currentmessage.comment,fdesc:this.currentmessage.fdesc,empno:this.currentUser.username};else var i={id:this.currentmessage.id,fcode:this.currentmessage.fcode,comment:this.currentmessage.comment,fdesc:this.currentmessage.fdesc,insertdate:n,empno:this.currentUser.username};if("CHO"==this.bsubcat)return null==this.$store.state.sbatch[0].enddate&null!=this.$store.state.sbatch[0].startdate?(alert(this.mybatch[0].runid+"لابد من إنهاء التشغيله رقم  "),void this.$router.push("/batch")):(alert("CHO"),this.update(i),this.offon("false",this.$store.state.midDo0),this.offon("false",this.$store.state.midDo4),this.Getmessages(),this.$refs.l3.hidden=1,this.$refs.l2.hidden=1,this.$refs.refid.hidden=1,void(this.interval=0));if("rdown"==this.bsubcat)return this.update(i),this.offon("false",this.$store.state.midDo0),this.offon("false",this.$store.state.midDo4),this.Getmessages(),this.$refs.l3.hidden=1,this.$refs.l2.hidden=1,this.$refs.refid.hidden=1,this.interval=0,clearInterval(this.timer2),void(this.timer2=setInterval((function(){return t.getrates()}),3e5));if("MR"==this.bsubcat)return alert("عطل صيانه"),this.update(i),this.offon("false",this.$store.state.midDo4),this.Getmessages(),this.$refs.l3.hidden=1,this.$refs.l2.hidden=1,this.$refs.refid.hidden=1,void(this.interval=0);this.offon("false",this.$store.state.midDo4),this.update(i),this.Getmessages(),this.$refs.l3.hidden=1,this.$refs.l2.hidden=1,this.$refs.refid.hidden=1,this.interval=0}else alert("insert comment  أدخل تعليق");else alert("No permession..  ");else alert("you must select failure code")}else alert("insert comment  أدخل تعليق");else alert("لا يمكن تغيير الكود :  "+this.currentmessage.subcat)})),Object(l["a"])(a,"selectRow",(function(t,e,s,a,n,i,r,o){this.currentmessage.id=t,this.currentmessage.fcode=e,this.currentmessage.comment=s,this.currentmessage.mtime=a,this.currentmessage.subcat=n,this.currentmessage.catcode=i,this.currentmessage.mreject=r,this.currentmessage.insertdate=o})),Object(l["a"])(a,"chotime",(function(){var t=new Date,e=new Date(this.currentmessage.insertdate),s=this.bsubcat,a=Math.abs(t-e)/6e4;if(this.cholasttime=a,"CHO"==s)t.getHours(),e.getHours();return a})),a)}),p=g,v=(s("06be"),s("2877")),b=Object(v["a"])(p,o,c,!1,null,"789b2897",null),_=b.exports,y=s("2899"),C=s("2461"),$=(s("9962"),s("bc3a"),new h["a"]("",""),{name:"Messages",data:function(){return{content:{},cats:{},subcats:{},failures:{}}},components:{MessagesTable:y["a"],MessagesDrop:C["a"],TabMenue:r["a"],OpmessageTable:_},mounted:function(){this.Getit(),this.Getcat(),this.Getsubcat(),this.Getfailure()},beforeUpdated:function(){this.hide()},methods:{Getit:function(){var t=this;d["a"].getMessages().then((function(e){t.content=e.data})).catch((function(t){console.error(t)}))},hide:function(){this.OpmessageTable.destroy()},Getcat:function(){var t=this;d["a"].getallcat().then((function(e){t.cats=e.data})).catch((function(t){console.error(t)}))},Getsubcat:function(){var t=this;d["a"].getmysubcat(4).then((function(e){t.subcats=e.data})).catch((function(t){console.error(t)}))},Getfailure:function(){var t=this;d["a"].getmyfailure(178).then((function(e){t.failures=e.data})).catch((function(t){console.error(t)}))}}}),k=$,x=Object(v["a"])(k,n,i,!1,null,null,null);e["default"]=x.exports},a434:function(t,e,s){"use strict";var a=s("23e7"),n=s("23cb"),i=s("a691"),r=s("50c4"),o=s("7b0b"),c=s("65f0"),l=s("8418"),u=s("1dde"),m=u("splice"),d=Math.max,f=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var s,a,u,m,p,v,b=o(this),_=r(b.length),y=n(t,_),C=arguments.length;if(0===C?s=a=0:1===C?(s=0,a=_-y):(s=C-2,a=f(d(i(e),0),_-y)),_+s-a>h)throw TypeError(g);for(u=c(b,a),m=0;m<a;m++)p=y+m,p in b&&l(u,m,b[p]);if(u.length=a,s<a){for(m=y;m<_-a;m++)p=m+a,v=m+s,p in b?b[v]=b[p]:delete b[v];for(m=_;m>_-a+s;m--)delete b[m-1]}else if(s>a)for(m=_-a;m>y;m--)p=m+a-1,v=m+s-1,p in b?b[v]=b[p]:delete b[v];for(m=0;m<s;m++)b[m+y]=arguments[m+2];return b.length=_-a+s,u}})},fb9f:function(t,e,s){"use strict";s("8c5b")}}]);
//# sourceMappingURL=chunk-03ba3388.a4ca5703.js.map